# Configuration file for dnsmasq DNS
#

# Never forward plain names (without a dot or domain part)
<%= "domain-needed" if @conf['domain-needed'] %>

# Never forward addresses in the non-routed address spaces.
<%= "bogus-priv" if @conf['bogus-priv'] %>

# Change this line if you want dns to get its upstream servers from
# somewhere other that /etc/resolv.conf
<%= "resolv-file=/etc/resolv_dnsmasq.conf" if @conf['nameservers'] %>

# If you don't want dnsmasq to read /etc/hosts, uncomment the
# following line.
<%= "no-hosts" if @conf['hosts'] %>
# or if you want it to read another file, as well as /etc/hosts, use
# this.
<%= "addn-hosts=/etc/hosts_dnsmasq" if @conf['hosts'] %>

# Set this (and domain: see below) if you want to have a domain
# automatically added to simple names in a hosts-file.
<%= "expand-hosts" if @conf['expand-hosts'] %>

# Set the domain for dnsmasq. this is optional, but if it is set, it
# does the following things.
# 1) Allows DHCP hosts to have fully qualified domain names, as long
#     as the domain part matches this setting.
# 2) Sets the "domain" DHCP option thereby potentially setting the
#    domain of all systems configured by DHCP
# 3) Provides the domain part for "expand-hosts"
<%= "domain=#{@domain}" if @domain %>
